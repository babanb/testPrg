@using Resources = ADOPets.Web.Resources.Wording
@model ADOPets.Web.ViewModels.AlbumGallery.EditViewModel
@using ADOPets.Web.Common.Extensions

<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">@Resources.AlbumGallery_Edit_ModelTitle</h4>
        </div>
        <input type="hidden" id="hdnPetId" value="@Model.PetId" />
        <input type="hidden" id="hdnAlbumId" value="@Model.Id" />
        @using (Html.BeginForm("Edit", "AlbumGallery", new { }, FormMethod.Post, new { enctype = "multipart/form-data", @id = "editAlbumGalleryForm", @class = "form-horizontal defaultForm", @role = "form" }))
        {         
            @Html.AntiForgeryToken()
            <div class="modal-body">

                <div class="form-group">
                    @Html.LabelRequiredFor(model => model.Title, new { @class = "col-sm-3 control-label" })
                    <div class="col-md-3">
                        @Html.TextBoxFor(model => model.Title, new { @class = "form-control", placeholder = Resources.AlbumGallery_Edit_TitlePlaceHolder })
                        @Html.ValidationMessageFor(model => model.Title)
                    </div>
                    <div class="col-md-3">
                        <a href="javascript:void(0)" style="text-decoration: none !important;" id="lnkChooseFromGallery">
                           @Resources.AlbumGallery_Edit_SelectPhoto</a>
                        <br /><br />
                        <a href="javascript:void(0)" style="text-decoration: none !important;" id="btnFileUpload">
                            @Resources.AlbumGallery_Edit_UploadPhoto</a>
                    </div>
                </div>
                <div class="" id="dvGalleryPhoto">
                </div>
                <div id="dvGalleryUploadError" class="error">
                </div>
                <div class="" id="dvAlbumPhotoList">
                    <table class="table" id="tblNewPhoto" width="80%">
                        @foreach (var photo in @Model.lstGallery)
                        {
                            var filename = photo.ImageURL.Split('.')[0];
                            var isChecked = "";
                            var isOnlyGalleryPhoto = "";

                            if (photo.ImageURL == @Model.IsDefaultCover)
                            { isChecked = "checked='checked'"; }


                            if (photo.IsGalleryPhoto) { isOnlyGalleryPhoto = "readonly"; }
                            
                            <tr id="tr-0-@filename">
                                <td width="20%">
                                    <img src="/PhotoGallery/GetImage?fileName=@photo.ImageURL&imgType=thumb&petId=@photo.PetId" class="img-thumbnail" style="height: 50px; width: 50px;">
                                       <input type="hidden" id="hdnGalleryId" value="@photo.Id">
                                    <input type="hidden" id="hdnImageURL" value="@photo.ImageURL">
                                  <input type="hidden" id="hdnIsGalleryPhoto" value="@photo.IsGalleryPhoto"></td>
                                <td width="25%">
                                    <input type="text" class="form-control" id="txtTitle" value="@photo.Title" placeholder="@Resources.AlbumGallery_Edit_PhotoTitlePlaceHolder" @isOnlyGalleryPhoto/>
                                    <input type="hidden" id="hdnDeleteFileName" value="@photo.ImageURL"></td>
                                <td width="20%" id="td-tr-0-@filename"></td>
                                <td width="5%"><a href="javascript:void(0)" onclick="removeRow('@filename')" class="text-warning"><i class="fa fa-trash-o"></i></a></td>
                                <td width="10%">
                                    <input type="radio" name="rdbDefaultPhoto" id="rdb-@filename" value="@filename" @isChecked />
                                    @Resources.AlbumGallery_Edit_ISDefault </td>
                            </tr>
                        }
                    </table>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" id="btnCloseModel">@Resources.AlbumGallery_Edit_CloseButton</button>
                <button type="button" id="btnUpdateAlbum" class="btn btn-primary">@Resources.AlbumGallery_Edit_SubmitButton</button>
            </div>
        }
    </div>
</div>

<script type="text/javascript" src="@Url.Content("~/Scripts/external/ajaxupload.js")"></script>
<script src="@Url.Content("~/Scripts/external/ui-custom.js")"></script>
<script src="@Url.Content("~/Scripts/external/jquery.form.min.js")"></script>
<script src="@Url.Content("~/Scripts/customs/views/AlbumGallery/List.js")"></script>
<script src="@Url.Content("~/Scripts/customs/views/AlbumGallery/Edit.js")"></script>


