@using Resources = ADOPets.Web.Resources.Wording
@model ADOPets.Web.ViewModels.Account.ConfirmationViewModel
@using ADOPets.Web.Common.Helpers;
@using Model

<div class="messageStyle">
    @{ Html.RenderPartial("_Alerts"); }
</div>

<div id="pageTitle">
    <div class="row">
        <div class="col-md-6">
            <h1>@Resources.Users_AddUser_Confirmation</h1>
        </div>
    </div>
</div>

<div id="mainContainer">
    @if (!Roles.IsUserInRole(UserTypeEnum.VeterinarianAdo.ToString()) && !Roles.IsUserInRole(UserTypeEnum.VeterinarianExpert.ToString()) && !Roles.IsUserInRole(UserTypeEnum.Admin.ToString()))
    {
        <div id="hiderightsidebar">
            <img src="@Url.Content("~/Content/images/hide-img.png")" width="22" height="34" alt=""/>
        </div>
        <div id="showrightsidebar">
            <img src="@Url.Content("~/Content/images/show-img.png")" width="22" height="34" alt="" />
        </div>
    }
    <div id="dvConf">
        @using (Ajax.BeginForm("Confirmation", "OwnerPayment", new AjaxOptions
                                                   {
                                                       UpdateTargetId = "Confirmation",
                                                       HttpMethod = "POST",
                                                       OnBegin = "onBegin",
                                                       OnComplete = "onComplete",
                                                       InsertionMode = InsertionMode.Replace
                                                   }, new { @id = "ConfirmationForm", @class = "form-horizontal" }))
        {  
            <div class="signup-form">
                <div class="table-responsive">

                    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table">
                        <tr class="bg-primary">
                            <td colspan="3">
                                <div style="text-align: left; font-size: 100%; font-weight: 600;" class="pull-left">@Resources.Account_SignUp_Subscription</div>
                                @*<div class="pull-right" style="font-size: 100%;"><a href="#BasicInfo" class=".jumper" data-scrollto="#subscriptionDiv" data-toggle="tab" style="color: #FFF; font-weight: 600;"><i class="fa fa-pencil"></i>@Resources.Account_SignUp_Edit</a></div>*@
                                <div class="clearfix"></div>
                            </td>
                        </tr>
                        <tr style="font-weight: 600;">
                            <td width="32%"><strong>@Html.LabelFor(m => m.Promocode)</strong></td>
                            <td colspan="2"><strong>@Html.LabelFor(m => m.Plan)</strong></td>
                        </tr>
                        <tr class="active">
                            <td>@Model.Promocode</td>
                            <td colspan="2">@Model.Plan</td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr class="bg-primary">
                            <td colspan="3">
                                <div style="text-align: left; font-size: 100%; font-weight: 600;" class="pull-left">@Resources.Account_SignUp_BasicInformation</div>
                                @*                                <div class="pull-right" style="font-size: 100%;"><a href="#BasicInfo" class=".jumper" data-scrollto="#basicinfoDiv" data-toggle="tab" style="color: #FFF; font-weight: 600;"><i class="fa fa-pencil"></i>@Resources.Account_SignUp_Edit</a></div>*@
                                <div class="clearfix"></div>
                            </td>
                        </tr>
                        <tr style="font-weight: 600;">
                            <td><strong>@Html.LabelFor(m => m.FirstName)</strong> </td>
                            <td width="33%"><strong>@Html.LabelFor(m => m.MiddleName)</strong> </td>
                            <td width="35%"><strong>@Html.LabelFor(m => m.LastName)</strong> </td>
                        </tr>
                        <tr class="active">
                            <td>@Model.FirstName</td>
                            <td>@Model.MiddleName</td>
                            <td>@Model.LastName</td>
                        </tr>
                        <tr style="font-weight: 600;">
                            <td colspan="2"><strong>@Html.LabelFor(m => m.BirthDate)</strong></td>
                            <td width="33%"><strong>@Html.LabelFor(m => m.Gender)</strong></td>
                        </tr>
                        <tr class="active">
                            <td colspan="2">
                                @if (@Model.BirthDate != null)
                                {   @Model.BirthDate.Value.ToShortDateString()}</td>
                            <td>@EnumHelper.GetResourceValueForEnumValue(Model.Gender)</td>
                        </tr>
                        <tr style="font-weight: 600;">
                            <td colspan="3"><strong>@Html.LabelFor(m => m.Email)</strong></td>
                        </tr>
                        <tr class="active">
                            <td colspan="3">
                                <div style="word-wrap: break-word;">@Model.Email</div>
                            </td>
                        </tr>
                        <tr style="font-weight: 600;">
                            <td colspan="3"><strong>@Html.LabelFor(m => m.TimeZone)</strong></td>
                        </tr>
                        <tr class="active">
                            <td colspan="3">@EnumHelper.GetResourceValueForEnumValue(Model.TimeZone)</td>
                        </tr>

                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr class="bg-primary">
                            <td colspan="3">
                                <div style="text-align: left; font-size: 100%; font-weight: 600;" class="pull-left">@Resources.Account_SignUp_BillingInformation</div>
                                <div class="pull-right" style="font-size: 100%;"><a href="@Url.Action("Billing", "OwnerPayment")" class="jumper" style="color: #FFF; font-weight: 600;"><i class="fa fa-pencil"></i>@Resources.Account_SignUp_Edit</a></div>
                                <div class="clearfix"></div>
                            </td>
                        </tr>
                        @if (ADOPets.Web.Common.Helpers.DomainHelper.GetDomain() == DomainTypeEnum.US)
                        {
                            <tr style="font-weight: 600;">
                                <td width="32%"><strong>@Html.LabelFor(m => m.CreditCardType)</strong></td>
                                <td colspan="2"><strong>@Html.LabelFor(m => m.CreditCardNumber)</strong></td>
                            </tr>
                            <tr class="active">
                                <td>@Model.CreditCardType</td>
                                <td colspan="2">@Model.CreditCardNumber</td>
                            </tr>
                            <tr style="font-weight: 600;">
                                <td width="32%"><strong>@Html.LabelFor(m => m.ExpirationDate)</strong></td>
                                <td colspan="2"><strong>@Html.LabelFor(m => m.CVV)</strong></td>
                            </tr>
                            <tr class="active">
                                <td>@Model.ExpirationDate</td>
                                <td colspan="2">@Model.CVV</td>
                            </tr>
                        }
                        <tr style="font-weight: 600;">
                            <td width="32%"><strong>@Html.LabelFor(m => m.BillingAddress1)</strong></td>
                            <td colspan="2"><strong>@Html.LabelFor(m => m.BillingAddress2)</strong></td>
                        </tr>
                        <tr class="active">
                            <td>@Model.BillingAddress1</td>
                            <td colspan="2">@Model.BillingAddress2</td>
                        </tr>
                        <tr style="font-weight: 600;">
                            <td width="32%"><strong>@Html.LabelFor(m => m.BillingCity)</strong></td>
                            <td colspan="2"><strong>@Html.LabelFor(m => m.BillingState)</strong></td>
                        </tr>
                        <tr class="active">
                            <td>@Model.BillingCity</td>
                            <td colspan="2">@EnumHelper.GetResourceValueForEnumValue(Model.BillingState)</td>
                        </tr>
                        <tr style="font-weight: 600;">
                            <td width="32%"><strong>@Html.LabelFor(m => m.BillingZip)</strong></td>
                            <td colspan="2"><strong>@Html.LabelFor(m => m.BillingCountry)</strong></td>
                        </tr>
                        <tr class="active">
                            <td>@Model.BillingZip</td>
                            <td colspan="2">@EnumHelper.GetResourceValueForEnumValue(Model.BillingCountry)</td>
                        </tr>
                    </table>
                    <h3 class="bg-danger" style="padding: 10px 0;">@Resources.Account_SignUp_TotalCharge <span class="text-danger">@DomainHelper.GetCurrency()@Model.Price.ToString(System.Globalization.CultureInfo.CurrentCulture)</span></h3>
                </div>
                @if (ADOPets.Web.Common.Helpers.DomainHelper.GetDomain() == DomainTypeEnum.US)
                {
                    <p class="text-center">
                        @*<a href="@Url.Action("SignUp", "Account")" class="btn btn-primary btn-outline-rounded ">@Resources.Account_SignUp_Cancel <i class="fa fa-eraser"></i></a>*@
                        <button type="submit" class="btn btn-success btn-outline-rounded" id="next-bt">@Resources.Account_SignUp_Purchase <i class="fa fa-shopping-cart"></i></button>
                    </p>
                }
            </div>
        }

  

@if (ADOPets.Web.Common.Helpers.DomainHelper.GetDomain() == DomainTypeEnum.French)
{
    HttpContext.Current.Session["reference"] = "ref" + DateTime.Now.ToString("HHmmss");
    <form action="@WebConfigHelper.CmcicServeur" method="post" id="PaymentRequest">
        @Html.Hidden("montant", Model.Price.ToString(System.Globalization.CultureInfo.CurrentCulture) + "EUR")
        @Html.Hidden("TPE", WebConfigHelper.CmcicTpe)
        @Html.Hidden("version", WebConfigHelper.CmcicVersion)
        @Html.Hidden("MAC", "")
        @Html.Hidden("reference", HttpContext.Current.Session["reference"])
        @Html.Hidden("societe", WebConfigHelper.CmcicCodeSociete)
        @Html.Hidden("date", DateTime.Now.ToString("dd/MM/yyyy:HH:mm:ss"))
        @Html.Hidden("url_retour", WebConfigHelper.CmcicUrlOk + "OwnerPayment/CmcicAccountConfirmation")
        @Html.Hidden("url_retour_ok", WebConfigHelper.CmcicUrlOk + "OwnerPayment/CmcicAccountConfirmation")
        @Html.Hidden("url_retour_err", WebConfigHelper.CmcicUrlKo + "OwnerPayment/CmcicAccountError")
        @Html.Hidden("mail", Model.Email)
        @Html.Hidden("texte-libre", "This is a test")
        @Html.Hidden("lgue", "FR")
          @Html.Hidden("SendingSite", WebConfigHelper.CmcicSite)

        <p class="text-center">
            <button type="submit" class="btn btn-success btn-outline-rounded" id="frPaymentProceed">@Resources.Account_SignUp_Purchase <i class="fa fa-shopping-cart"></i></button>
        </p>
    </form>
}
  </div>
</div>

<script src="@Url.Content("~/Scripts/customs/views/OwnerPayment/Confirmation.js")"></script>
