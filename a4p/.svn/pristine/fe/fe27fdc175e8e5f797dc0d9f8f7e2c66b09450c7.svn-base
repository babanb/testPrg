@using Resources = ADOPets.Web.Resources.Wording;
@using ADOPets.Web.Common.Extensions
@using ADOPets.Web.Common.Helpers
@using Model
@model ADOPets.Web.ViewModels.SMO.DetailsViewModel
@{
    ViewBag.Title = Resources.Smo_Edit_Title;
    int userId = ViewBag.UserId;
}

@Html.HiddenFor(model => model.SMOREquest.ID)
@Html.Hidden("IndexURL", Url.Action("Index", "SMO"))
@Html.Hidden("EditVDURL", Url.Action("Edit_VD", "SMO"))

<div class="clearfix"></div>

<div id="pageTitle">
    <div class="row">
        <div class="col-md-8">
            <h1>@Resources.Smo_Edit_SMOID - @(Html.DisplayFor(a => a.SMOId))<span class="label label-primary">@Model.SMOREquest.SMORequestStatusId</span></h1>
        </div>
        <div class="col-md-4"><a href="@Url.Action("Index", "SMO")" class="btn btn-primary pull-right"><i class="fa fa-angle-left"></i>@Resources.Smo_Edit_BackButton</a> </div>
    </div>
</div>
<div id="mainContainer">
    <div id="cover4econsult" style="background:@Url.Content("~/images/smo-cover.jpg") center left repeat; ">
        <div class="consultSteptab radius3">
            <a href="@Url.Action("Edit", "SMO", new { id = Model.SMOREquest.ID })" class="zoomin">@Resources.Smo_Edit_lblStep1<br>
                <span>@Resources.Smo_Edit_SMODetails</span><i class="fa fa-arrow-right"></i></a>
        </div>
        <div class="consultSteptab radius3 active">
            <a href="@Url.Action("AssignedExperts", "SMO", new { id = Model.SMOREquest.ID })" class="zoomin">@Resources.Smo_Edit_lblStep2<br>
                <span>@if (@Model.SMOREquest.SMORequestStatusId != SMORequestStatusEnum.Complete)
                      { 
                    @Resources.Smo_Edit_Experts
                      }
                      else
                      {
                    @Resources.Smo_Edit_ExpertsDetails
                      }</span><i class="fa fa-arrow-right"></i></a>

        </div>
        <div class="consultSteptab radius3">
            @if (@Model.SMOREquest.SMORequestStatusId != SMORequestStatusEnum.Complete)
            { 
                <a href="@Url.Action("SubmitReport", "SMO", new { id = @Model.SMOREquest.ID })" class="zoomin">@Resources.Smo_Edit_lblStep3<br>
                    <span>@Resources.Smo_Edit_SubmitReport</span></a> 
            }
            else
            {
                <a href="@Url.Action("ViewReport", "SMO", new { id = @Model.SMOREquest.ID })" class="zoomin">@Resources.Smo_Edit_lblStep3<br>
                    <span>@Resources.Smo_Edit_ViewReport</span></a>
            }

        </div>
        <div class="clearfix"></div>
    </div>
    <div id="econsultConfirm">
        @if (@Model.SMOREquest.SMORequestStatusId != SMORequestStatusEnum.Complete)
        {
            <center>
                    <a href="@Url.Action("VetExperts", "SMO", new { id = @Model.SMOREquest.ID })" class="btn btn-primary" id="Editprofile" data-toggle="modal" data-target=".bs-example-modal-lg"><i class="fa fa-check-square"></i>@Resources.Smo_Edit_AssignVetExperts</a>
                    @*<a href="#" class="btn btn-primary"  data-toggle="modal" data-target="#assignExpertModal"><i class="fa fa-check-square"></i>Assign Expert</a>*@
                <input type="hidden" id="hdnExpertCommitteeURL" value="@Url.Action("ExpertCommittee", "SMO", new { id = @Model.SMOREquest.ID })" />
                 @if (@Model.SMOREquest.SMORequestStatusId == SMORequestStatusEnum.Open)
                 {  
                   <a href="javascript:coid(0)" id="lnkExpertCommitteeButton" class="btn btn-default disabled"><i class="fa fa-envelope"></i>@Resources.Smo_Edit_lblExpertCommittee</a>
                 }
                 else
                 {
                   <a href="@Url.Action("ExpertCommittee", "SMO", new { id = @Model.SMOREquest.ID })" id="lnkExpertCommitteeButton" class="btn btn-default"><i class="fa fa-envelope"></i>@Resources.Smo_Edit_lblExpertCommittee</a>
                 }
            </center>
        }

        <hr>

        @if (Roles.IsUserInRole(UserTypeEnum.Admin.ToString())
                || (Roles.IsUserInRole(UserTypeEnum.VeterinarianAdo.ToString())
                || Roles.IsUserInRole(UserTypeEnum.VeterinarianLight.ToString())) && Model.SMOExpertsList != null)
        {      
            <div id="showExpertList">
                @Html.Partial("_showExpertList", Model)
            </div>        
        }
    </div>

    <hr>
    <div class="form-group">
        <div class="col-md-6">
            <a href="@Url.Action("Edit", "SMO", new { id = @Model.SMOREquest.ID })" class="btn btn-primary btn-lg pull-right"><i class="fa fa-arrow-left"></i>@Resources.Smo_Edit_BackButton</a>
        </div>
        <div class="col-md-6">
            @if (@Model.SMOREquest.SMORequestStatusId != SMORequestStatusEnum.Complete)
            { 
                <a href="@Url.Action("SubmitReport", "SMO", new { id = @Model.SMOREquest.ID })" class="btn btn-success btn-lg">@Resources.Smo_Edit_BtnNextStep <i class="fa fa-arrow-right"></i></a>
            }
            else
            {
                <a href="@Url.Action("ViewReport", "SMO", new { id = @Model.SMOREquest.ID })" class="btn btn-success btn-lg">@Resources.Smo_Edit_BtnNextStep <i class="fa fa-arrow-right"></i></a>
            }

        </div>
    </div>
    <div class="clearfix"></div>
</div>





<div class="clearfix"></div>
<div id="EditprofileModel" class="modal fade" tabindex="-1" role="dialog"></div>
<div class="clearfix"></div>
<div id="expertResponse" class="modal fade" tabindex="-1" role="dialog"></div>
<div class="clearfix"></div>
<div id="addBioModel" class="modal fade" tabindex="-1" role="dialog"></div>
<div class="clearfix"></div>
<script src="@Url.Content("~/Scripts/customs/views/SMO/EditVD.js")"></script>
