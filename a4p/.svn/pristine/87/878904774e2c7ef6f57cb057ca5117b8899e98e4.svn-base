@using ADOPets.Web.Common.Extensions
@using ADOPets.Web.Common.Helpers
@using Model
@using Resources = ADOPets.Web.Resources.Wording
@model ADOPets.Web.ViewModels.Users.ViewUserViewModel

@{
    ViewBag.Title = Resources.Users_ViewUser_title;
}

<div id="pageTitle">
    <div class="row">
        <div class="col-md-6">
            <h1>@ViewBag.Title</h1>
        </div>
        <div class="col-md-6">
            <a href="@Url.Action("Index", "Users")" class="btn btn-primary pull-right" data-toggle="modal"><i class="fa fa-angle-left"></i>@Resources.Users_AddUser_Back</a>
        </div>
    </div>
</div>
<div id="mainContainer" class="usersProfileView">
    @if (Model.Usertype == UserTypeEnum.OwnerAdmin)
    {
        <div id="myAccount">
            <a href="#UserBasicInfo" style="width: 50% !important;" data-toggle="tab" class="active"><i class="fa fa-gear (alias)"></i>@Resources.Users_AddUser_BasicInformation</a>
            <a href="#UserPlanInfo" style="width: 50% !important;" data-toggle="tab"><i class="fa fa-file-text"></i>@Resources.Users_ViewUser_OwnerPlan</a>
            <div class="clearfix"></div>
        </div>
    }
    <div class="tab-content">
        <div class="tab-pane fade in active" id="UserBasicInfo">
            <div class="panel panel-info">
                @if (Model.Usertype != UserTypeEnum.OwnerAdmin)
                {
                    <div class="panel-heading">
                        <h3 class="panel-title">@Resources.Users_AddUser_BasicInformation</h3>
                    </div>
                }
                <div class="panel-body">
                    @if (Model.Status != Resources.User_Index_InActiveStatus)
                    {
                        <a href="@Url.Action("EditUser", "Users", new { id = Model.Id })" class="btn btn-success pull-right" style="margin-right: 10px;"><i class="fa fa-pencil"></i>@Resources.Users_ViewUser_Edit</a>
                    }
                    else
                    {
                        <div class="alert alert-info alert-dismissible fade in alert2" role="alert" style="text-align: center;">
                            <strong>@Resources.Smo_Index_Status : @Model.Status</strong>
                            @using (Html.BeginForm("EditUserStatus", "Users", FormMethod.Post, new { @id = "frmMarkUserActive", @class = "form-horizontal defaultForm", @role = "form" }))
                            {
                                @Html.HiddenFor(model => model.Id)
                                <span class="pull-right" style="margin-right: 10px; margin-top: -23px;">
                                    @Resources.User_Index_ChangeStatus : 
                                      <input type="checkbox" name="chkActive" id="chkActive" />
                                </span>
                            }
                        </div> 
                    }

                    <div class="column">
                        <div class="detailrow">
                            <div>
                                <label>@Resources.Profile_OwnerEdit_UserId</label>
                            </div>
                            <div class="colonspace">:</div>
                            <div>@Model.Id</div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.Usertype)</div>
                            <div class="colonspace">:</div>
                            <div>@EnumHelper.GetResourceValueForEnumValue(Model.Usertype)</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.FirstName)</div>
                            <div class="colonspace">:</div>
                            <div>@Model.FirstName</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.LastName)</div>
                            <div class="colonspace">:</div>
                            <div>@Model.LastName</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.BirthDate)</div>
                            <div class="colonspace">:</div>
                            <div>@(Model.BirthDate == null ? "" : @Model.BirthDate)</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.Gender)</div>
                            <div class="colonspace">:</div>
                            <div>@(Model.Gender == null ? "" : @Html.EnumDisplayFor(m => m.Gender).ToString())</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.Email)</div>
                            <div class="colonspace">:</div>
                            <div>@Model.Email</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.TimeZone)</div>
                            <div class="colonspace">:</div>
                            <div>@(Model.TimeZone == null ? "" : @EnumHelper.GetResourceValueForEnumValue(Model.TimeZone).ToString())</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.Image)</div>
                            <div class="colonspace">:</div>
                            <div>
                                <img src="@Url.Action("GetImage", "Message", new { fromUserId = Model.Id })" width="100" style="width: 50px; height: 50px;" class="img-responsive" />
                            </div>
                            <div class="clearfix"></div>
                        </div>

                    </div>

                    <div class="column">

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.Address1)</div>
                            <div class="colonspace">:</div>
                            <div>@Model.Address1</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.Address2)</div>
                            <div class="colonspace">:</div>
                            <div>@Model.Address2</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.City)</div>
                            <div class="colonspace">:</div>
                            <div>@Model.City</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.Country)</div>
                            <div class="colonspace">:</div>
                            <div>@EnumHelper.GetResourceValueForEnumValue(Model.Country)</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.State)</div>
                            <div class="colonspace">:</div>
                            <div>@EnumHelper.GetResourceValueForEnumValue(Model.State)</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.Zip)</div>
                            <div class="colonspace">:</div>
                            <div>@Model.Zip</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.PrimaryPhone)</div>
                            <div class="colonspace">:</div>
                            <div>@Model.PrimaryPhone</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.SecondaryPhone)</div>
                            <div class="colonspace">:</div>
                            <div>@Model.SecondaryPhone</div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="detailrow">
                            <div>@Html.LabelFor(m => m.CreationDate)</div>
                            <div class="colonspace">:</div>
                            <div>@(Model.CreationDate == null ? "" : @Model.CreationDate.Value.ToString("MM/dd/yyyy"))</div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
        @if (Model.Usertype == UserTypeEnum.OwnerAdmin)
        {
            <div class="tab-pane fade in" id="UserPlanInfo">
                <!--Plan and Promocode Information -->
                <div class="panel panel-info">
                    @if (Model.Status == @Resources.User_Index_PaymentPendingStatus)
                    {
                        <div class="alert alert-info alert-dismissible fade in alert2" role="alert" style="text-align: center; z-index: 0;">
                            <strong>@Resources.Smo_Index_Status : @Resources.User_Index_PaymentPendingStatus</strong>
                        </div> 
                        if (Model.IsNewUser)
                        {
                        <a href="@Url.Action("EditPlan", "Profile", new { userid = Model.Id })" id="lnkEditPlan" class="btn btn-success editBtn" style="float: right;margin-right:20px;"><i class="fa fa-pencil"></i>@Resources.Profile_EditPlan_Title</a>
                        <br />   
                        }                    

                        <div class="panel-body">

                            @if (!Model.IsNewUser)
                            {
                                if (Model.isRenewed)
                                {
                                <div class="alert alert-info alert-dismissible fade in alert2" role="alert" style="text-align: center;">
                                    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">@Resources.CloseButton</span></button>
                                    <strong>@Resources.Profile_PlanDetail_RenewUpgradeTitle</strong>
                                    <a href="@Url.Action("GetRenewalInfo", "Profile", new { userid = Model.Id })" id="GetPlanRenewalDetails">@Resources.Profile_PlanDetail_ClickToseeDetails</a>
                                </div>
                                }
                                if (Model.isTrial)
                                {
                                    if (!Model.isRenewed)
                                    {
                                <a class="btn btn-success editBtn" id="CallUpgradePlanModel" href="@Url.Action("UpgradePlan", "Users", new { id = Model.Id })" style="float: right; margin-right: 10px;margin-top:5px;"><i class="fa fa-pencil"></i>@Resources.Profile_PlanUpgrade_Title</a>
                                    }
                                }
                                else
                                {
                                    if (Model.IsFreeUser)
                                    { 
                                <a class="btn btn-success editBtn" id="CallUpgradePlanModel" href="@Url.Action("UpgradePlan", "Users", new { id = Model.Id })" style="float: right; margin-right: 10px;margin-top:5px;"><i class="fa fa-pencil"></i>@Resources.Profile_PlanUpgrade_Title</a>
                                    }
                                    else
                                    {
                                        if (Model.AdditionalPets < 10 && Model.Promocode != ADOPets.Web.Common.Constants.FreeUserPromoCode && Model.ExpirationDate > DateTime.Today)
                                        {
                                <a class="btn btn-success editBtn" id="CallAddPetsModel" href="@Url.Action("AddPets", "Users", new { id = Model.Id })" style="float: right; margin-right: 10px;margin-top:5px;"><i class="fa fa-pencil"></i>@Resources.Profile_PlanDetail_AdditionalPets</a>
                                        }
                                        if (!Model.isRenewed && Model.Promocode != ADOPets.Web.Common.Constants.FreeUserPromoCode)
                                        {
                                <a class="btn btn-success editBtn" id="CallRenewPlanModel" href="@Url.Action("RenewPlan", "Users", new { id = Model.Id })" style="float: right; margin-right: 10px;margin-top:5px;"><i class="fa fa-pencil"></i>@Resources.Profile_PlanDetail_RenewalPlan</a>
                                        }
                                    }
                                }
                            }

                            <div class="row">
                                <div class="col-md-offset-3 col-md-6">
                                    <div class="gray-bar text-primary">
                                        <strong>@Model.Plan</strong>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="column">
                                <div class="detailrow">
                                    <div>@Resources.Users_AddUser_Promocode</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.Promocode</div>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="detailrow">
                                    <div>@Resources.Users_ViewUser_BasicPlan</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.BasicPlan</div>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="detailrow">
                                    <div>@Resources.Users_ViewUser_Description</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.description</div>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="detailrow">
                                    <div>@Resources.Users_ViewUser_AdditionalInfo</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.AdditionalInfo</div>
                                    <div class="clearfix"></div>
                                </div>
                                 @if (!Model.IsFreeUser)
                            { 
                                <div class="detailrow">
                                    <div>@Resources.Users_AddUser_AdditionalPets</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.AdditionalPets</div>
                                    <div class="clearfix"></div>
                                </div>
                           
                                 } 
                                else{ 
                                <div class="detailrow">
                                    <div>@Resources.Users_AddUser_AdditionalPets</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.MaxPetCount</div>
                                    <div class="clearfix"></div>
                                </div>
                           
                                 }
                            </div>
                            @if (!Model.IsFreeUser)
                            { 
                                <div class="column">
                                    <div class="detailrow">
                                        <div>@Resources.Users_ViewUser_StartDate</div>
                                        <div class="colonspace">:</div>
                                        <div>@Model.StartDate.ToShortDateString()</div>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="detailrow">
                                        <div>@Resources.Users_ViewUser_ExpirationDate</div>
                                        <div class="colonspace">:</div>
                                        <div>@Model.ExpirationDate.ToShortDateString()</div>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="detailrow">
                                        <div>@Resources.Users_ViewUser_Duration</div>
                                        <div class="colonspace">:</div>
                                        <div>@string.Format(Resources.Profile_PlanDetail_Days, Model.Dueration)</div>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="detailrow">
                                        <div>@Resources.Users_ViewUser_RemainingDays</div>
                                        <div class="colonspace">:</div>
                                        <div>@string.Format(Resources.Profile_PlanDetail_Days, Model.RemainingDays)</div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <div class="panel-body">
                            @if (Model.Status != Resources.User_Index_InActiveStatus)
                            {
                                if (Model.isRenewed)
                                {
                                <div class="alert alert-info alert-dismissible fade in alert2" role="alert" style="text-align: center;">
                                    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">@Resources.CloseButton</span></button>
                                    <strong>@Resources.Profile_PlanDetail_RenewUpgradeTitle</strong>
                                    <a href="@Url.Action("GetRenewalInfo", "Profile", new { userid = Model.Id })" id="GetPlanRenewalDetails">@Resources.Profile_PlanDetail_ClickToseeDetails</a>
                                </div>
                                }
                                if (Model.isTrial)
                                {
                                    if (!Model.isRenewed)
                                    {
                                <a class="btn btn-success editBtn" id="CallUpgradePlanModel" href="@Url.Action("UpgradePlan", "Users", new { id = Model.Id })" style="float: right; margin-right: 10px;margin-top:5px;"><i class="fa fa-pencil"></i>@Resources.Profile_PlanUpgrade_Title</a>
                                    }
                                }
                                else
                                {
                                    if (Model.IsFreeUser)
                                    {
                                <a class="btn btn-success editBtn" id="CallUpgradePlanModel" href="@Url.Action("UpgradePlan", "Users", new { id = Model.Id })" style="float: right; margin-right: 10px;margin-top:5px;"><i class="fa fa-pencil"></i>@Resources.Profile_PlanUpgrade_Title</a>
                                    }
                                    else
                                    {
                                        if ((Model.AdditionalPets < 10 && Model.MaxPetCount < 10) && Model.Promocode != ADOPets.Web.Common.Constants.FreeUserPromoCode && Model.ExpirationDate > DateTime.Today)
                                        {
                                <a class="btn btn-success editBtn" id="CallAddPetsModel" href="@Url.Action("AddPets", "Users", new { id = Model.Id })" style="float: right; margin-right: 10px;margin-top:5px;"><i class="fa fa-pencil"></i>@Resources.Profile_PlanDetail_AdditionalPets</a>
                                        }
                                        if (!Model.isRenewed && Model.Promocode != ADOPets.Web.Common.Constants.FreeUserPromoCode)
                                        {
                                <a class="btn btn-success editBtn" id="CallRenewPlanModel" href="@Url.Action("RenewPlan", "Users", new { id = Model.Id })" style="float: right; margin-right: 10px;margin-top:5px;"><i class="fa fa-pencil"></i>@Resources.Profile_PlanDetail_RenewalPlan</a>
                                        }
                                    }
                                }
                            }
                            <div class="row">
                                <div class="col-md-offset-3 col-md-6">
                                    <div class="gray-bar text-primary">
                                        <strong>@Model.Plan</strong>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <div class="column">
                                <div class="detailrow">
                                    <div>@Resources.Users_AddUser_Promocode</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.Promocode</div>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="detailrow">
                                    <div>@Resources.Users_ViewUser_BasicPlan</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.BasicPlan</div>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="detailrow">
                                    <div>@Resources.Users_ViewUser_Description</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.description</div>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="detailrow">
                                    <div>@Resources.Users_ViewUser_AdditionalInfo</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.AdditionalInfo</div>
                                    <div class="clearfix"></div>
                                </div>

                              @if (!Model.IsFreeUser)
                            { 
                                <div class="detailrow">
                                    <div>@Resources.Users_AddUser_AdditionalPets</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.AdditionalPets</div>
                                    <div class="clearfix"></div>
                                </div>
                           
                                 } 
                                else{ 
                                <div class="detailrow">
                                    <div>@Resources.Users_AddUser_AdditionalPets</div>
                                    <div class="colonspace">:</div>
                                    <div>@Model.MaxPetCount</div>
                                    <div class="clearfix"></div>
                                </div>
                           
                                 }


                            </div>

                            @if (!Model.IsFreeUser)
                            { 
                                <div class="column">
                                    <div class="detailrow">
                                        <div>@Resources.Users_ViewUser_StartDate</div>
                                        <div class="colonspace">:</div>
                                        <div>@Model.StartDate.ToShortDateString()</div>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="detailrow">
                                        <div>@Resources.Users_ViewUser_ExpirationDate</div>
                                        <div class="colonspace">:</div>
                                        <div>@Model.ExpirationDate.ToShortDateString()</div>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="detailrow">
                                        <div>@Resources.Users_ViewUser_Duration</div>
                                        <div class="colonspace">:</div>
                                        <div>@string.Format(Resources.Profile_PlanDetail_Days, Model.Dueration)</div>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="detailrow">
                                        <div>@Resources.Users_ViewUser_RemainingDays</div>
                                        <div class="colonspace">:</div>
                                        <div>@string.Format(Resources.Profile_PlanDetail_Days, Model.RemainingDays)</div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            }
                        </div>
                    }
                </div>
                <!--Plan and Promocode end here-->
            </div>

                    if (Model.isTrial)
                    {
            <div class="tab-pane fade in" id="UpgradeMyPlan">
            </div>
                    }
                    else
                    {
                        if (Model.IsFreeUser)
                        {   
            <div class="tab-pane fade in" id="UpgradeMyPlan">
            </div> 
                        }
                        else
                        {
            <div class="tab-pane fade in" id="MyPlanAddPets">
            </div>
            
            <div class="tab-pane fade in" id="RenewMyPlan">
            </div>
                        }
                    }
        }
        else if (Model.Usertype != UserTypeEnum.OwnerAdmin && Model.Usertype != UserTypeEnum.Admin)
        {
            <!--other details-->
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">@Resources.Users_ViewUser_OtherDetails</h3>
                </div>
                <div class="panel-body">
                    <div class="column">

                        <div class="detailrow">
                            <div>@Resources.Users_AddUser_Center</div>
                            <div class="colonspace">:</div>
                            <div>@Model.CenterId</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Resources.Users_AddUser_Speciality</div>
                            <div class="colonspace">:</div>
                            <div>@EnumHelper.GetResourceValueForEnumValue(Model.Speciality)</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Resources.Users_AddUser_Hospital</div>
                            <div class="colonspace">:</div>
                            <div>@Model.Hospital</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Resources.Users_AddUser_Diploma</div>
                            <div class="colonspace">:</div>
                            <div>@Model.Diploma</div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="detailrow">
                            <div>@Resources.Users_AddUser_StateExercise</div>
                            <div class="colonspace">:</div>
                            <div>@Model.StateExercise</div>
                            <div class="clearfix"></div>
                        </div>
                    </div>

                    <div class="column">

                        <div class="detailrow">
                            <div>@Resources.Users_AddUser_DEA</div>
                            <div class="colonspace">:</div>
                            <div>@Model.DEA</div>
                            <div class="clearfix"></div>
                        </div>


                        <div class="detailrow">
                            <div>@Resources.Users_AddUser_NPI</div>
                            <div class="colonspace">:</div>
                            <div>@Model.NPI</div>
                            <div class="clearfix"></div>
                        </div>


                        <div class="detailrow">
                            <div>@Resources.Users_AddUser_LicenceToPractice</div>
                            <div class="colonspace">:</div>
                            <div>@Model.LicenceToPractice</div>
                            <div class="clearfix"></div>
                        </div>


                        <div class="detailrow">
                            <div>@Resources.Users_AddUser_Comments</div>
                            <div class="colonspace">:</div>
                            <div>@Model.Comments</div>
                            <div class="clearfix"></div>
                        </div>
                    </div>

                    <div class="clearfix"></div>

                </div>
            </div>
            <!--other details end here-->    
        }
    </div>
</div>
<div class="clearfix"></div>

<div id="dvPlanEdit" class="modal fade" tabindex="-1" role="dialog"></div>
<div id="UpgradePlanModel" class="modal fade" tabindex="-1" role="dialog"></div>
<div id="RenewPlanModel" class="modal fade" tabindex="-1" role="dialog"></div>
<div id="AddPetsModel" class="modal fade" tabindex="-1" role="dialog"></div>
<div id="PlanRenewalDetails" class="modal fade" tabindex="-1" role="dialog"></div>

<script src="~/Scripts/customs/views/Users/ViewUser.js"></script>
