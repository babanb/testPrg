@using Resources = ADOPets.Web.Resources.Wording
@model IEnumerable<ADOPets.Web.ViewModels.Insurance.IndexViewModel>

<div id="dvHdnTotalRecords" style="display: none;">
    @Model.Count().ToString()
</div>


<div id="insuranceList" data-container="paging_container" data-page-size="5">
@if (Model.Count() > 0)
{
     foreach (var item in Model)
     {
        <div class="listing animated fadeInLeft" data-sub-container="sub_container">
            <div class="row" data-item="item">
                <div class="col-md-10">
                    <img src="@Url.Content("~/Content/Images/insurance-icon.jpg")" alt="@Resources.Insurance_Edit_Insurance" />
                    <p>
                        <strong>@Resources.Insurance_Edit_Name</strong> : <span>@item.Name</span><br>
                        <strong>@Resources.Insurance_Edit_AccountNumber</strong> : <span>@item.AccountNumber</span><br>
                        <strong>@Resources.Insurance_Edit_EndDate</strong> : <span>
                            @if (item.EndDate.HasValue)
                            {
                                @item.EndDate.Value.ToShortDateString()
                            }</span>
                    </p>
                </div>
                @if (ADOPets.Web.Common.Helpers.ShareInfoHelper.IsSharedUser(ViewBag.PetId, ViewBag.UserId))
                {
                    if (ADOPets.Web.Common.Helpers.SMOHelper.CanEditPet(ViewBag.PetId))
                    {
                    <div class="col-md-2 listing-control">
                        <a href="@Url.Action("Edit", "Insurance", new { insuranceId = item.Id })" class="btn btn-success editInsurance" data-tooltip="tooltip" data-placement="top" title="@Resources.Insurance_Edit_Edit"><i class="fa fa-pencil"></i></a>
                        <br>
                        <a href="@Url.Action("DeleteConfirm", "Insurance", new { insuranceId = item.Id, petId = ViewBag.PetId })" class="btn btn-warning deleteInsurance" data-tooltip="tooltip" data-placement="top" title="@Resources.Insurance_Edit_Delete"><i class="fa fa-trash-o"></i></a>
                    </div>
                    }
                }
            </div>
            <div class="clearfix"></div>
        </div>
     }
}
else
{
    <div class="listing"><div class="row"><div id="dvNoRecords">@Html.Raw(Resources.Insurance_Edit_FilterNoResult) </div></div></div>
}
   
    
</div>
<div data-paging-control="paging_control">
</div>

<h5 class="pull-right animated fadeInLeft"></h5>
<div class="clearfix"></div>


<div id="editeModalInsuranc" class="modal fade" tabindex="-1" role="dialog"></div>
<div id="deleteModalInsurance" class="modal fade" tabindex="-1" role="dialog"></div>

<script src="@Url.Content("~/Scripts/customs/views/Insurance/List.js")"></script>
<script src="@Url.Content("~/Scripts/external/pagination.js")"></script>

<script>
    var resourceMessage = '@Html.Raw(Resources.Insurance_Edit_PagedListPagerPageItemSliceAndTotalFormat)';
    var pager = new Pager();
    $(document).ready(function () {
        initPager(false);
        displayResult();
        initialiseclick();
        var val = '@TempData["SuccessMessage"]';
        showMessage(val);
    });

    function displayResult() {
        $("[data-paging-control='paging_control']").show();
        var itemCount = $('div[class="listing"]').find(".listing-control").length;
        var chkcount = 0;
        $.each($('div[data-sub-container="sub_container"]'), function (key, val) {
            if ($(this).css('display') == 'none') {
                chkcount = chkcount + 1;
            }
        });
    @*    if (chkcount == itemCount) {
            $('div[data-container="paging_container"]').append("<div class='listing'><div class='row'><div id='dvNoRecords'>" + '@Html.Raw(Resources.Insurance_Edit_FilterNoResult)' + "</div></div></div>");
            $('[data-sub-container="sub_container"]').slideDown(500);
        }
        else {
            $("#dvNoRecords").remove();
            $("[data-paging-control='paging_control']").show('slow');
        }*@
    }
</script>
