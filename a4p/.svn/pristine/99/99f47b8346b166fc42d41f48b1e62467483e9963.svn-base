@model ADOPets.Web.ViewModels.SMO.AddSetupViewModel
@using ADOPets.Web.Common.Extensions
@using ADOPets.Web.Common.Helpers
@using Model
@using Resources = ADOPets.Web.Resources.Wording;

@{
    int userId = ViewBag.UserId;
}

@using (Ajax.BeginForm("Setup", "SMO", new AjaxOptions
{
    HttpMethod = "POST"
}, new { @id = "newSmo", @class = "form-horizontal defaultForm bv-form", @role = "form" }))
{
    @Html.AntiForgeryToken()
    @Html.Hidden("SetupURL", Url.Action("Setup", "SMO"))
    @Html.Hidden("SelectPetURL", Url.Action("SelectPet", "SMO"))
    @Html.Hidden("BillingURL", Url.Action("Billing", "SMO"))
    @Html.Hidden("ConfirmationURL", Url.Action("Confirmation", "SMO"))
    @Html.Hidden("InvestigationListURL", Url.Action("InvestigationList", "SMO"))
    @Html.Hidden("PaymentURL", Url.Action("Payment", "SMO"))
    @Html.Hidden("AddInvestigationURL", Url.Action("AddInvestigation", "SMO"))
    @Html.Hidden("EditInvestigationURL", Url.Action("EditInvestigation", "SMO"))
    @Html.Hidden("DeleteInvestigationURL", Url.Action("DeleteConfirm", "SMO"))
    @Html.Hidden("DeleteTestURL", Url.Action("DeleteInvestigation", "SMO"))
    <div class="bg-primary" id="smotopbar">
        <div class="column">
            @Html.HiddenFor(model => model.Id)
            @Html.HiddenFor(model => model.SMOSubmittedBy)
            <div class="form-group">
                @Html.LabelRequiredFor(model => model.Title, new { @class = "col-md-4 control-label" })
                <div class="col-md-8">
                    @Html.TextBoxFor(modelItem => modelItem.Title, new { @class = "form-control", @placeholder = @Resources.Smo_Add_TitlePlaceHolder, @data_bv_notempty = "true", @data_bv_field = @Resources.Smo_Add_Title })
                    @Html.ValidationMessageFor(modelItem => modelItem.Title)
                </div>
            </div>
        </div>
        <div class="column">
            <div class="form-group">
                @Html.LabelRequiredFor(model => model.PetId, new { @class = "col-md-4 control-label" })
                <div class="col-md-8">
                    <div id="selectPetlink">
                        <strong>
                            <a id="selectPet" href="@Url.Action("SelectPet", "SMO")" class="radius3" data-toggle="modal" data-target=".bs-example-modal-lg">
                                <i class="fa fa-check-square"></i>
                                @* Click here*@
                                @if (TempData["PetName_" + userId] == null)
                                {
                                    @Resources.Smo_Add_Clickhere 
                                }
                                else
                                {
                                    @TempData["PetName_" + userId]
                                }
                                @Html.HiddenFor(m => m.PetId)
                            </a>
                        </strong>

                    </div>

                </div>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="panel-group" id="accordion">
        <div class="panel panel-default" id="pnlCondition">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-mandatory="{* @Resources.Pet_Add_FieldsMandatoryMessage}" data-parent="#accordion" href="#collapseOne" class="mandatory">
                        @Resources.Smo_Add_Condition
                    </a>
                </h4>
            </div>
            <div id="collapseOne" class="panel-collapse collapse in">
                <div class="panel-body">
                    <div class="column">
                        <div class="form-group">
                            @Html.LabelRequiredFor(model => model.Diagnosis, new { @class = "col-md-4 control-label", @style = "font-weight:bold;" })
                            <div class="col-md-8">
                                @Html.TextBoxFor(modelItem => modelItem.Diagnosis, new { @class = "form-control", @placeholder = @Resources.Smo_Add_DiagnosisPlaceHolder, @data_bv_notempty = "true" })
                                @Html.ValidationMessageFor(modelItem => modelItem.Diagnosis)
                            </div>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            @Html.LabelFor(model => model.DateOfOnSet, new { @class = "col-md-4 control-label", @style = "font-weight:bold;" })
                            <div class="col-md-8">
                                <div class="input-group">
                                    @*@Html.TextBoxFor(model => model.DateOfOnSet, new { @class = "form-control datepicker", placeholder = Resources.Smo_Add_DateofOnsetPlaceHolder, @style = "z-index:1000 !important;" })*@
                                    @Html.TextBoxFor(model => model.DateOfOnSet, "{0:d}", new { @class = "form-control datepicker", placeholder = Resources.Smo_Add_DateofOnsetPlaceHolder, @style = "z-index:1000 !important;" })
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="form-group" style="margin-left: 15px; margin-bottom: 0;">
                            @Html.LabelFor(model => model.Comments, new { @class = "col-md-4 control-label", @style = "font-weight:bold;" })
                            <div class="col-md-8">
                                @Html.TextAreaFor(modelItem => modelItem.Comments, new { @class = "form-control", @placeholder = @Resources.Smo_Add_CommentsPlaceHolder, @rows = 3, @height = "81px" })
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
        <div class="panel panel-default" id="pnlTest">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" class="first-time">
                        @Resources.Smo_Add_Test
                    </a>
                </h4>
            </div>
            <div id="collapseTwo" class="panel-collapse collapse">
                <div class="panel-body">
                    <div class="radius3 testtopbar">
                        <h5 class="pull-left">@Resources.Smo_Add_TestTitle</h5>
                        <button type="button" id="AddTest" data-toggle="modal" data-url="@Url.Action("AddInvestigation", "SMO")" data-target="#newtest" class="btn btn-primary pull-right">
                            <i class="fa fa-plus-circle"></i>@Resources.Smo_Add_AddButton</button>
                        <div class="clearfix"></div>
                    </div>
                    <div id="divInvestigation"></div>
                </div>
            </div>
        </div>
        <div class="panel panel-default" id="pnlSymptoms">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" class="first-time">
                        @Resources.Smo_Add_Symptoms
                    </a>
                </h4>
            </div>
            <div id="collapseThree" class="panel-collapse collapse">
                <div class="panel-body">
                    <div class="form-group">
                        @Html.Label(@Resources.Smo_Add_SymptomsMessage, new { @class = "col-md-6 control-label", @style = "font-weight:bold;" })
                        <div class="col-md-6">
                            @Html.TextBoxFor(modelItem => modelItem.Symptoms1, new { @class = "form-control", @placeholder = @Resources.Smo_Add_Symptom1PlaceHolder })
                            @Html.TextBoxFor(modelItem => modelItem.Symptoms2, new { @class = "form-control", @style = "margin:15px 0;", @placeholder = @Resources.Smo_Add_Symptom2PlaceHolder })
                            @Html.TextBoxFor(modelItem => modelItem.Symptoms3, new { @class = "form-control", @placeholder = @Resources.Smo_Add_Symptom3PlaceHolder })
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default" id="pnlFirstOpinion">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-mandatory="{* @Resources.Pet_Add_FieldsMandatoryMessage}" data-parent="#accordion" href="#collapseFour" class="first-time mandatory">
                        @Resources.Smo_Add_FirstOpinion
                    </a>
                </h4>
            </div>
            <div id="collapseFour" class="panel-collapse collapse">
                <div class="panel-body">
                    <div class="form-group">
                        @Html.LabelRequiredFor(modelItem => modelItem.FirstOpinion, new { @class = "col-md-6 control-label", @style = "font-weight:bold;" })
                        <div class="col-md-6">
                            @Html.TextAreaFor(modelItem => modelItem.FirstOpinion, new { @class = "form-control", @placeholder = @Resources.Smo_Add_FirstMedicalOpioinPlaceHolder, @rows = 3, @height = "60px" })
                            @Html.ValidationMessageFor(modelItem => modelItem.FirstOpinion)
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelRequiredFor(modelItem => modelItem.Question, new { @class = "col-md-6 control-label", @style = "font-weight:bold;" })
                        <div class="col-md-6">
                            @Html.TextAreaFor(modelItem => modelItem.Question, new { @class = "form-control", @placeholder = @Resources.Smo_Add_StateYourQuestionPlaceHolder, @rows = 3, @height = "60px", @data_bv_notempty = "true" })
                            @Html.ValidationMessageFor(modelItem => modelItem.Question)
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group" style="padding: 20px 0px 0px 20px">
            <div class="col-md-12">
                <div class="checkbox">
                    @Html.CheckBoxFor(modelItem => modelItem.authorizeveterinarians, new { @data_bv_notempty = "true", @name = "authorizeveterinarians" }) @Resources.Smo_Add_AuthoriseText
                    @Html.ValidationMessageFor(modelItem => modelItem.authorizeveterinarians)
                </div>
            </div>
        </div>
        <div class="form-group" style="padding-left: 20px">
            <div class="col-md-12">
                <div class="checkbox">
                    @Html.CheckBoxFor(modelItem => modelItem.certify, new { @data_bv_notempty = "true", @name = "certify" }) @Resources.Smo_Add_CertifyText
                    @Html.ValidationMessageFor(modelItem => modelItem.certify)
                </div>
            </div>
        </div>
        <hr>
        @if (TempData["HasSMO_" + userId].ToString().ToLower() == "false")
        {
            <div class="form-group">
                <div class="col-md-6">
                    <button id="next-bt" data-url="@Url.Action("Setup", "SMO")" type="button" class="btn btn-success btn-lg">@Resources.Smo_Add_NextButton <i class="fa fa-arrow-right"></i></button>
                </div>
            </div>
        }
        else
        {
            <div class="form-group">
                <div class="col-md-6">
                    <button id="cancel-bt" type="button" class="btn btn-warning btn-lg pull-right">@Resources.Smo_Add_CancelButton </button>
                </div>
                <div class="col-md-6">
                    <button id="submit-bt" type="button" data-url="@Url.Action("Setup", "SMO")" class="btn btn-success btn-lg">@Resources.Smo_Add_Submit </button>
                </div>
            </div>
        }
    </div>
 
    <div id="selectModalPet" class="modal fade" tabindex="-1" role="dialog"></div>
    <div id="addModalTest" class="modal fade" tabindex="-1" role="dialog"></div>
    <div id="editModalTest" class="modal fade" tabindex="-1" role="dialog"></div>
    <div id="deleteModalTest" class="modal fade" tabindex="-1" role="dialog"></div>
}

<script> function GetTranstaltionSMOTest() {
     var result = {
         "TestDateRequired": '@Resources.Smo_Add_TestDateRequired',
         "TestNameRequired": '@Resources.Smo_Add_TestNameRequired'
     };
     return result;
 }</script>
<script src="@Url.Content("~/Scripts/external/jquery.form.min.js")"></script>
<script src="@Url.Content("~/Scripts/customs/views/SMO/Setup.js")"></script>



