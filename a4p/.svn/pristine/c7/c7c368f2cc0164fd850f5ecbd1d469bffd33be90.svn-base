@using Resources = ADOPets.Web.Resources.Wording
@using ADOPets.Web.Common.Extensions
@using ADOPets.Web.Common.Helpers

@model IEnumerable<ADOPets.Web.ViewModels.Econsultation.ExpertVeterinarainViewModel>
@{
    ViewBag.Title = Resources.Veterinarian_Index_Title;
}
<div id="dvHdnTotalRecords" style="display: none;">
    @*@Model.Count().ToString()*@
</div>
<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">@Resources.CloseButton</span></button>
            <h4 class="modal-title text-primary" id="myModalLabel">@Resources.Veterinarian_Index_Veterinarian</h4>
        </div>
        <div class="modal-body">
            <div class="well" id="vetsearch">
                <div class="row">
                    <div class="col-md-3">
                        <h4>@Resources.Veterinarian_Index_Search</h4>
                    </div>
                    <div class="col-md-4">
                        <label class="sr-only" for="VetNameFilter">@Resources.Veterinarian_Index_FirstNamePlaceHolder</label>
                        <input type="text" class="form-control" id="VetNameFilter" name="VetNameFilter" placeholder="@Resources.Veterinarian_Index_FirstNamePlaceHolder">
                    </div>
                    <div class="col-md-4">
                        <label class="sr-only" for="VetLastNameFilter">@Resources.Veterinarian_Index_LastNamePlaceHolder</label>
                        <input type="text" class="form-control" id="VetLastNameFilter" name="VetLastNameFilter" placeholder="@Resources.Veterinarian_Index_LastNamePlaceHolder">
                    </div>
                    <div class="col-md-1">
                        <button type="submit" class="btn btn-primary"><i class="fa fa-search" style="padding-right: 0;"></i></button>
                    </div>
                </div>
            </div>
            <div class="customscroll"> <div id="subCntnt1"></div>
                <div id="listing-main" data-container="paging_container" data-page-size="5">

                    <table id="VetList" class="table table-bordered" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                    <th width="5%"></th>
                    <th width="18%">@Resources.Veterinarian_Index_FirstName</th>
                    <th width="18%">@Resources.Veterinarian_Index_LastName</th>
                    <th width="30%">@Resources.Veterinarian_Index_Email</th>
                    <th width="25%">@Resources.Veterinarian_Index_VetSpecialities</th>
                    @*<th width="8%">@Resources.Econsultation_Add_Status</th>*@
                    <th></th>
                    </tr>
                    </thead>
                <tbody>

                    @foreach (var item in Model)
                    {
                        @*<div class="listing3" data-sub-container="sub_container">*@
                        <tr>
                            @*<div class="listing3Icon">*@
                            <td>
                                <div class="listing3Icon">
                                <img src="@Url.Action("GetImage", "Message", new { fromUserId = item.Id })" class="img-responsive" />
                                 </div>       
                            @*</div>*@
                            </td>
                            @*<div class="listing3content">
                                <div class="row" data-item="item">*@
                                    @*<div class="col-md-5">
                                        <p>*@
                                        <td>
                                            @*<strong>@Resources.Veterinarian_Index_FirstName</strong> : *@<span id="spnVetName" data-item-name="spnVetName">@item.FirstName</span><br>
                                        </td>
                                        <td>
                                            @*<strong>@Resources.Veterinarian_Index_LastName</strong> :*@ <span id="spnVetLName" data-item-type="spnVetLName">@item.LastName</span>
                                        </td>
                                            @*</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>*@
                                        <td>
                                            @*<strong>@Resources.Veterinarian_Index_Email</strong> :*@ <span>@item.Email</span><br>
                                         </td>
                                        <td>   
                                            @*<strong>@Resources.Veterinarian_Index_VetSpecialities</strong> :*@ <span>@Html.EnumDisplay(item.VetSpeciality)</span><br>
                                        </td>
                                            @*</p>
                                    </div>
                                    *@
                                        <td>
                                            <div class="col-md-1">
                                            <a href="#" id="btn-sm1" class="btn btn-success btn-sm" onclick="callBtnClick1('@(item.Id)')" data-tooltip="tooltip" data-placement="top" title="" data-original-title="Select"><i id="selectVetAnchor" class="fa fa-square-o"></i></a>
                                            </div>
                                            @Html.Hidden("VetID", item.Id)
                                            </td>
                            @*    </div>
                            </div>*@
                            </tr>
                            @*<div class="clearfix"></div>
                        </div>*@
                    }
                    </tbody>
                    </table>
                </div>
                @*<div id="pagingControls" data-paging-control="paging_control"></div>*@
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" id="vetclose-bt" class="btn btn-default" data-dismiss="modal">@Resources.Econsultation_Add_Close</button>
            <div class="clearfix"></div>
        </div>
    </div>
</div>
@*<script src="@Url.Content("~/Scripts/external/bootstrap-confirmation.js")"></script>
<script src="@Url.Content("~/Scripts/external/pagination.js")"></script>*@
@*<script src="@Url.Content("~/Scripts/customs/views/Econsultation/_SelectVet.js")"></script>*@

<script>
    DrawTable('#VetList', [0]);
   // filteronText('#VetNameFilter', 1, '#VetList');
   // filteronText('#VetLastNameFilter', 2, '#VetList');

    $("#VetNameFilter").on('keyup click', function () {
        var UCenterID = $('#VetNameFilter').val();
        $('#VetList').dataTable().fnFilter('^' + UCenterID + '.*', 1, true);
    });

    $("#VetLastNameFilter").on('keyup click', function () {
        var UCenterID = $('#VetLastNameFilter').val();
        $('#VetList').dataTable().fnFilter('^' + UCenterID + '.*', 2, true);
    });


</script>
<script>
    function callBtnClick1(id) {
        //debugger;
        var oItemId = id;
        var doctitle = $($(this).children("i[id=selectVetAnchor]"));
        var doc = $('.fa-check-square');
        doc.removeClass("fa-check-square").addClass("fa-square-o");
        doctitle.removeClass("fa-square-o").addClass("fa-check-square");
        
        $.ajax({
            url: '@Url.Action("SelectVet", "Econsultation")',
            data: { Id: oItemId },
            type: 'POST',
            dataType: 'json',
            success: function (Data) {
                
                if (Data) {
                    $('#vetclose-bt').click();
                    $("#assignvetModal").text(Data.FirstName.Value + ' ' + Data.LastName.Value);
                    localStorage['selectedVet'] = $('#assignvetModal').text();

                    $("#assignvetModal").removeAttr('style');
                    $("#spnVetRequired").remove();                                      
                }
            },
            error: function (req, status, error) {

            }
        });        
    } 
</script>
