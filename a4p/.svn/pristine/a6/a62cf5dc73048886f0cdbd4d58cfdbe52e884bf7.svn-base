@using ADOPets.Web.Common.Extensions
@using ADOPets.Web.Common.Helpers
@using Model
@using Resources = ADOPets.Web.Resources.Wording

@model IEnumerable<ADOPets.Web.ViewModels.Pet.IndexViewModel>

@{
    ViewBag.Title = Resources.Pet_Index_Title;
}

@Html.Hidden("DeletePetURL", Url.Action("DeleteConfirm", "Pet"))
<div id="pageTitle">
    <div class="row">
        <div class="col-md-6">
            @if (Roles.IsUserInRole(UserTypeEnum.VeterinarianAdo.ToString()) || Roles.IsUserInRole(UserTypeEnum.VeterinarianLight.ToString()) || Roles.IsUserInRole(UserTypeEnum.Admin.ToString()))
            {
                <h1>@Resources.Pet_Index_AdminHeader</h1>
            }
        </div>
    </div>
</div>
<div id="mainContainer">
    <div class="well">
        <div class="row">
            <div class="col-md-4">
                @Html.EnumDropDownList(typeof(PetTypeEnum), "PetTypeVDFilter", ViewBag.PetType as PetTypeEnum?, Resources.Pet_Index_VD_AnimalTypeOptionalLabel, new { @class = "form-control" })
            </div>
            <div class="col-md-4">
                @Html.TextBox("PetNameVDFilter", string.Empty, new { placeholder = Resources.Pet_Index_VD_AnimalNamePlaceHolder, @class = "form-control" })
            </div>
            <div class="col-md-4">
                @Html.TextBox("PetIdVDFilter", string.Empty, new { placeholder = Resources.Pet_Index_VD_AnimalIdPlaceHolder, @class = "form-control" })
            </div>
        </div>
    </div>
    <div id="table_id_wrapper" class="dataTables_wrapper form-inline no-footer">
        <table id="table_PetVD" class="table table-bordered dataTable" cellspacing="0" width="100%" role="grid" aria-describedby="table_id_info">
            <thead>
                <tr role="row">
                    <th width="12%" class="sorting" tabindex="0" aria-controls="table_PetVD" rowspan="1" colspan="1" aria-label="Pet Id: activate to sort column ascending" style="width: 57px;">@Resources.Pet_Index_VD_PetId</th>
                    <th width="14%" class="sorting" tabindex="0" aria-controls="table_PetVD" rowspan="1" colspan="1" aria-label="Pet Name: activate to sort column ascending" style="width: 71px;">@Resources.Pet_Index_AnimalName</th>
                    <th width="12%" class="sorting" tabindex="0" aria-controls="table_PetVD" rowspan="1" colspan="1" aria-label="Pet Type: activate to sort column ascending" style="width: 57px;">@Resources.Pet_Index_AnimalType</th>
                    <th width="12%" class="sorting" tabindex="0" aria-controls="table_PetVD" rowspan="1" colspan="1" aria-label="Owner Id: activate to sort column ascending" style="width: 60px;">@Resources.Pet_Index_VD_OwnerId</th>
                    <th width="18%" class="sorting" tabindex="0" aria-controls="table_PetVD" rowspan="1" colspan="1" aria-label="First Name: activate to sort column ascending" style="width: 113px;">@Resources.Pet_Index_VD_FirstName</th>
                    <th width="18%" class="sorting" tabindex="0" aria-controls="table_PetVD" rowspan="1" colspan="1" aria-label="Last Name: activate to sort column ascending" style="width: 113px;">@Resources.Pet_Index_VD_LastName</th>
                    <th width="14%" class="sorting" tabindex="0" aria-controls="table_PetVD" rowspan="1" colspan="1" aria-label="Action: activate to sort column ascending" style="width: 44px;">@Resources.Pet_Index_VD_Action</th>
                </tr>
            </thead>
            @foreach (var item in Model)
            { 
                <tr role="row" class="odd">
                    <td class="sorting_1">@item.Id</td>
                    <td>@item.PetName</td>
                    <td>@item.PetType</td>
                    <td>@item.OwnerId</td>
                    <td>@item.OwnerFirstName</td>
                    <td>@item.OwnerLastName</td>
                    <td>
                        <a href="@Url.Action("Edit", "Pet", new { @id = @item.Id })" class="btn btn-primary btn-sm" data-tooltip="tooltip" data-placement="top" title="" data-original-title="@Resources.Pet_List_Details">
                            <i class="fa fa-eye"></i></a>
                        @if (item.IsActive)
                        {
                            if (SMOHelper.CanDeletePet(item.Id))
                            {
                            <a href="#" onclick="callDeleteConfirm('@(item.Id)');" data-href="@Url.Action("DeletePet", "Pet", new { id = item.Id })" data-tooltip="tooltip" data-placement="left" title="@Resources.Users_Index_RemoveUserTooltip" class="btn btn-warning btn-sm opendelete">
                                <i class="fa fa-trash-o"></i>
                            </a>
                            }
                        }
                    </td>
                </tr>
            }
        </table>
    </div>

</div>
<div class="clearfix"></div>
<div id="confirmbx" class="modal fade" tabindex="-1" role="dialog"></div>

<script src="@Url.Content("~/Scripts/external/bootstrap-confirmation.js")"></script>
<script src="@Url.Content("~/Scripts/external/pagination.js")"></script>
<script src="~/Scripts/customs/views/Pet/Index_VD.js"></script>

