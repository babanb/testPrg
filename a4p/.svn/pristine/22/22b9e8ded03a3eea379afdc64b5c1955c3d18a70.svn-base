@using Resources = ADOPets.Web.Resources.Wording
@model ADOPets.Web.ViewModels.Profile.VetExpertModel
@using ADOPets.Web.Common.Extensions
@using Model
<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">@Resources.Profile_Index_btnClose</span></button>
            <h4 class="modal-title text-primary" id="myModalLabel">@Resources.Profile_Index_lblVetExperts</h4>
        </div>
        <div class="form-horizontal">
            @Html.Hidden("UrlSelectExpert", Url.Action("SelectExpert", "SMO"))
            @using (Html.BeginForm("VetExperts", "SMO", FormMethod.Post, new { @id = "EditProfileForm" }))
            {
                @Html.AntiForgeryToken()
                <div class="modal-body">
                    <div class="well" id="vetsearch">
                        <div class="row">
                            <div class="col-md-3">
                                <h4>@Resources.Profile_Index_lblSearchExpert</h4>
                            </div>
                            <div class="col-md-3">
                                @Html.TextBox("ExpertFirstNameFilter", string.Empty, new { placeholder = Resources.Profile_Index_FirstNamePlaceHolder, @class = "form-control" })
                            </div>
                            <div class="col-md-3">
                                @Html.TextBox("ExpertLastNameFilter", string.Empty, new { placeholder = Resources.Profile_Index_LastNamePlaceHolder, @class = "form-control" })
                            </div>
                            <div class="col-md-3">
                                @Html.EnumDropDownList(typeof(VetSpecialityEnum), "VetSpecialityFilter", ViewBag.SMORequestStatus as VetSpecialityEnum?, Resources.Profile_Index_Speciality, new { @class = "form-control" })
                            </div>
                        </div>
                    </div>
                    <div id="econsulvetlist" class="customscroll">
                        <div id="dvHdnTotalRecords" style="display: none;">
                            @Model.listOfVetExperts.Count().ToString()
                        </div> <div id="subCntnt1"></div>
                        <div id="listing-main" data-container="paging_container" data-page-size="10">
                            @for (var a = 0; a < @Model.listOfVetExperts.Count; a++)
                            {
                                <!--########row 1#########-->
                                <div class="listing2 animated fadeInLeft" data-sub-container="sub_container">
                                    <div class="listing2Icon">
                                        <img src="@Url.Action("GetImageById", "Profile", new {Id=@Model.listOfVetExperts[a].Id })"/>
                                    </div>
                                    <div class="listing2content">
                                        <div class="row" data-item="item">
                                            <div class="col-md-5">
                                                <p>
                                                    <strong>@Resources.Profile_Index_FirstName</strong> : <span id="spnFirstName" data-item-name="first_name">@Html.DisplayFor(modelItem => @Model.listOfVetExperts[a].FirstName)</span><br>
                                                    <strong>@Resources.Profile_Index_LastName</strong> : <span id="spnLastName" data-item-name="last_name">@Html.DisplayFor(modelItem => @Model.listOfVetExperts[a].LastName)</span>
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                <p>
                                                    <strong>@Resources.Profile_Index_Email</strong> : <span id="spnEmail" data-item-name="email">@Html.DisplayFor(modelItem => @Model.listOfVetExperts[a].Email)</span><br>
                                                    <strong>@Resources.Profile_Index_Speciality</strong> : <span id="spnSpeciality" data-item-type="speciality">@Html.EnumDisplayFor(modelItem => @Model.listOfVetExperts[a].Speciality)</span>
                                                </p>
                                            </div>
                                            <div class="col-md-1" id="divCheck">
                                                @Html.HiddenFor(modelItem => @Model.listOfVetExperts[a].Id)@Html.HiddenFor(modelItem => @Model.listOfVetExperts[a].SMOId)
                                                @Html.HiddenFor(modelItem => @Model.listOfVetExperts[a].CheckedStatus, new { @class = @Model.listOfVetExperts[a].Id, @id = "CheckedStatus_" + @Model.listOfVetExperts[a].Id })
                                                <a href="#" class="btn btn-success btn-sm" id="@Model.listOfVetExperts[a].Id" onclick="callBtnClick('@(@Model.listOfVetExperts[a].Id)')"  data-myitemid="@(@Model.listOfVetExperts[a].Id)" data-mylabel="@Model.listOfVetExperts[a].CheckedStatus"  data-original-title="Select" ><i id="selectPetAnchor_@Model.listOfVetExperts[a].Id" class="fa fa-square-o checkExpert"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            }
                        </div>
                    </div>
                    <div id="pagingControls" data-paging-control="paging_control"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="expertclose-bt" class="btn btn-default" data-dismiss="modal">@Resources.Profile_Index_btnClose</button>
                </div>
            }
        </div>
    </div>
</div>

<script src="@Url.Content("~/Scripts/external/pagination.js")"></script>
<script src="@Url.Content("~/Scripts/customs/views/SMO/VetExpertEdit.js")"></script>
<script>
    var resourceMessage = '@Html.Raw(Resources.Profile_Index_PagedListPagerPageItemSliceAndTotalFormat)';
    var pager = new Pager();

    $(document).ready(function () {
        initPager(true);
    });
    function deleteConfirmation() { }

    function displayResult() {
        $("[data-paging-control='paging_control']").show();
        var itemCount = $('div.listing2').find("#spnFirstName").length;
        var chkcount = 0;
        $.each($('div.listing2'), function (key, val) {

            if ($(this).css('display') == 'none') {
                chkcount = chkcount + 1;
            }
        });
        if (chkcount == itemCount) {
            showPageFilter();
            $('div[data-container="paging_container"]').append("<div class='petlist'><div class='row'><div id='dvNoRecords'>" + '@Html.Raw(Resources.Profile_Index_FilterNoResult)' + "</div</div</div>");
            $(".petlist").slideDown(500);
        }
        else {
            $("#dvNoRecords").remove();
            $("[data-paging-control='paging_control']").show('slow');
            showPageFilter();
        }
    }
</script>
